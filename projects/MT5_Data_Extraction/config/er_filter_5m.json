{
  "qa": {
    "min_bars_m5": 20000,
    "min_pct_days_full": 0.75,
    "day_full_threshold_pct": 0.75,
    "min_pct_days_full_required": 0.75,
    "expected_bars_per_day": 72,
    "min_pct_valid_transitions": 0.90,
    "tol_seconds": 5,
    "max_gap_minutes": 120,
    "min_history_years": 1.0,
    "window_days": null
  },

  "ER": {
    "window": 34,
    "thresholds": {
      "strict": 0.14,
      "loose": 0.12
    }
  },

  "PD": {
    "window": 34,
    "thresholds": {
      "strict": 0.85,
      "loose": 0.82
    }
  },

  "hysteresis": {
    "pctile_delta": 0.02
  },

  "sizes": {
    "m5_chunk_rows": 700000,
    "max_symbols_parallel": 1
  },

  "sessions": {
    "enabled": false,
    "windows": []
  },

  "session": {
    "enabled": false,
    "windows": []
  },

  "policy": {
    "enabled": true,
    "min_TR_after_cost": 0.25,
    "min_tr_after_cost": 0.25,

    "min_tr_after_cost_trend_strict": 0.3,
    "min_tr_after_cost_trend_loose": 0.2,
    "min_tr_after_cost_range_strict": 0.3,
    "min_tr_after_cost_range_loose": 0.2,
    "min_tr_after_cost_trend_balanced": 0.25,
    "min_tr_after_cost_range_balanced": 0.25,

    "min_ndq_trend": 0.25,
    "min_ndq_range": 0.2,

    "soft_penalty": {
      "enabled": true,
      "method": "linear",
      "w_tr": 0.6,
      "w_ndq": 0.4
    }
  },

  "volatility": {
    "enabled": true,
    "terciles": [0.3333, 0.6666]
  },

  "stability": {
    "enabled": true,
    "min_events_p_event": 50,
    "min_coverage_p": 0.25,
    "alpha_decay": {
      "enabled": true,
      "half_life_days": 180
    }
  },

  "structure": {
    "enabled": true,
    "min_events_per_symbol": 100,
    "small_move_threshold": 0.5,

    "score": {
      "small_move_max_strict": 0.98,
      "small_move_max_loose": 0.995,

      "skew_abs_max_strict": 1.0,
      "skew_abs_max_loose": 2.5,

      "kurt_max_strict": 4.0,
      "kurt_max_loose": 8.0,

      "w_small_move": 0.5,
      "w_skew": 0.25,
      "w_kurt": 0.25,

      "score_strict": 0.3,
      "score_loose": 0.6
    },

    "guardrails": {
      "cost_min_eps": 1e-9,
      "ndq_min": 0.0,
      "ndq_max": 1.0,
      "max_cost_to_range_mult": 500.0,
      "max_ret_units_abs": 5000.0
    }
  },

  "microstructure": {
    "enabled": true,
    "min_bars_per_symbol": 10000,
    "volume": {
      "illiquid_bar_max_strict": 0.2,
      "illiquid_bar_max_loose": 0.5,
      "cv_max_strict": 1.0,
      "cv_max_loose": 2.0,
      "w_level": 0.6,
      "w_illiquid": 0.25,
      "w_cv": 0.15,
      "score_strict": 0.3,
      "score_loose": 0.6
    },
    "vol": {
      "atr_window": 14,
      "score_q_lo": 0.10,
      "score_q_lo_mid": 0.25,
      "score_q_hi_mid": 0.75,
      "score_q_hi": 0.90
    }
  },

  "stats": {
    "alpha_strict": 0.05,
    "alpha_balanced": 0.10,
    "alpha_loose": 0.20,

    "p0_event": 0.20,
    "pvalue_combiner": "fisher",
    "pvalue_engine": "bucket_stat_score_v1",

    "n_eff_cap_PD": 50,
    "n_eff_cap_ER": 50,

    "n_eff_cap_p_event": 50,
    "n_eff_cap_p_event_bars": 200000,
    "min_cap_p_event_bars": 10000
  },

  "decay": {
    "penalty_lambda": 0.0
  },

  "corr": {
    "threshold": 0.85,
    "lookback_days": 90
  },

  "folds": {
    "granularity": "symbol",
    "min_folds": 5
  },

  "baskets": {
    "size_max": 12,

    "target_size_trend": 4,
    "target_size_range": 4,

    "corr_threshold_start": 0.6,
    "corr_threshold_min": 0.8,

    "enforce_exclusivity": true
  },

  "selection": {
    "mode": "topN",
    "m": 5,
    "n": 5,
    "topN": 20
  },

  "viability": {
    "score_viability_min": 0.0
  },

  "scores": {
    "w_significance": 0.25,
    "w_opportunity": 0.20,
    "w_stability": 0.25,
    "w_viability": 0.20,
    "w_structure": 0.10
  },

  "oos_validation": {
    "ER_OOS_min": 0.11,
    "PD_OOS_min": 0.8,
    "p_event_OOS_min": 0.25
  },

  "score_v2": {
    "enabled": true,
    "weights": {
      "ER": 0.35,
      "PD": 0.35,
      "p_event": 0.2,
      "structure_penalty": 0.1
    },
    "alpha_loose": {
      "ER": 0.0,
      "PD": 0.0,
      "p_event": 0.0
    }
  },

  "meta": {
    "created_utc": "2025-12-07T00:00:00Z",
    "updated_utc": "2025-12-10T00:00:00Z",
    "project_root": "C:\\Quant\\MT5_Data_Extraction",
    "run_id": "AUTO",
    "version": "c04.v4"
  }
}
